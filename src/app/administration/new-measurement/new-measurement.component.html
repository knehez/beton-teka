<p-card class="mb-2">
  <h3>Kísérlet keresése</h3>
  <small>Adja meg a keresni kívánt kísérlet azonosítóját!</small>

  <div class="input-group mb-3">
    <div class="input-group-prepend">
      <span class="input-group-text" id="inputGroup-sizing-default">Keresés</span>
    </div>
    <input type="text" class="form-control" aria-label="Default" [(ngModel)]="searchedExperimentId"
      aria-describedby="inputGroup-sizing-default">
  </div>
  <button type="button" (click)="searchExperiment()" class="btn btn-outline-primary">Keresés</button>
</p-card>

<p-card styleClass="mt-2" *ngIf="measurementTypes.length > 0">
  <div class="float-right">
      <button class="btn btn-sm mb-2 btn-success" (click)="createMeasurementGroup()">Új méréscsoport</button>
  </div>
  <p-tabMenu #tabMenu [model]="tabs" [activeItem]="tabs[0]"
    (click)="switchTab(tabMenu)" styleClass="mb-2"></p-tabMenu>
  
  <form [formGroup]="measurementForm">
    <div class="form-row">
      <div class="form-group col-md-2">
        <h4>Méréstípusok</h4>
        <p-listbox styleClass="w-100" [options]="filteredMeasurementTypes" formControlName="selectedMeasurementType"></p-listbox>
      </div>

      <div class="form-group col-md-10">
        <p-table [value]="selectedMeasurementType.measurementData.data">
          <ng-template pTemplate="header">
            <tr>
              <th *ngFor="let col of measurementColumns">
                {{col.header}}
              </th>
              <th>Műveletek</th>
            </tr>
            <tr>
              <td *ngFor="let col of measurementColumns" formGroupName="newMeasurementData">
                <input class="form-control form-control-sm" type="text" [placeholder]="col.header"
                  [formControlName]="col.field">
              </td>
              <td>
                <button class="btn btn-sm btn-success ml-2" (click)="addMeasurementData()">Hozzáad</button>
              </td>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-measurementData let-rowIndex="rowIndex">
            <tr>
              <td *ngFor="let col of measurementColumns">
                {{measurementData[col.field]}}
              </td>
              <td>
                <button class="btn btn-sm btn-danger ml-2" (click)="deleteRow(rowIndex)">Töröl</button>
              </td>
            </tr>
          </ng-template>
        </p-table>
      </div>
    </div>
  </form>
</p-card>